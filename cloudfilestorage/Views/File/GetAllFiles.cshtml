@model Amazon.S3.Model.ListObjectsV2Response

@{
    Layout = null;
}
@if (Model != null && Model.S3Objects.Count > 0)
{
    <div style="border-radius: 8px; padding: 10px;" class="flex-box border box-shadow">
        <div class="flex-container">
            @foreach (var itemsInsideDirectory in Model.S3Objects)
            {
                <div class="dropdown">
                    <div class="item">
                        @if (itemsInsideDirectory.Key.Contains("/"))
                        {
                            <img class="files-image" src="images/folders.png"/><br/>
                            <div class="justify-content-center d-flex">@itemsInsideDirectory.Key.Substring(0, itemsInsideDirectory.Key.Length-1)</div>
                        }
                        else
                        {
                            <img class="files-image" src="images/file.png"/><br/>
                            <div class="justify-content-center d-flex">@itemsInsideDirectory.Key</div>
                        }
                    </div>
                    <div class="dropdown-content">
                        <form method="post" asp-action="DeleteObject" asp-controller="File">
                            <input type="hidden" name="fileName" value="@itemsInsideDirectory.Key"/>
                            <button style="border: none;" type="submit">Delete</button>
                        </form>
                        <form method="post" asp-action="DownloadObject" asp-controller="File">
                            <input type="hidden" name="fileName" value="@itemsInsideDirectory.Key" />
                            <button style="border: none;" type="submit">Download</button>
                        </form>
                        @if (@itemsInsideDirectory.Key.Contains("/")){
                            <form method="post" asp-action="RenameBucket" asp-controller="File">
                                <button style="border: none; color: red;" class="renameButton" type="button" onclick="showRenameInput(this)">Rename</button>
                                <input type="hidden" name="oldName" value="@itemsInsideDirectory.Key"/>
                                <input class="new-name" style="display: none;" type="text" placeholder="Enter new name" name="newName">
                                <button class="okButton" style="display: none; border: none;" type="submit">Ok</button>
                            </form>
                        }
                        @if(!@itemsInsideDirectory.Key.Contains("/")){
                        <form method="post" asp-action="RenameObject" asp-controller="File">
                                <button style="border: none; color: red;" class="renameButton" type="button" onclick="showRenameInput(this)">Rename</button>
                                <input type="hidden" name="oldName" value="@itemsInsideDirectory.Key"/>
                                <input class="new-name" style="display: none;" type="text" placeholder="Enter new name" name="newName">
                                <button class="okButton" style="display: none; border: none;" type="submit">Ok</button>
                        </form>
                        }
                    </div>
                </div>
            }
        </div>
    </div>
}
else
{
    <h3>No files found</h3>
}